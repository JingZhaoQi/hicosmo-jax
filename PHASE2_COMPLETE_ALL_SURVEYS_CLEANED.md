# Phase 1+2 å®ŒæˆæŠ¥å‘Šï¼šæ‰€æœ‰é…ç½®æ–‡ä»¶æ¶æ„é‡æ„

**å®Œæˆæ—¥æœŸ**: 2025-10-28
**é‡æ„èŒƒå›´**: å…¨éƒ¨8ä¸ªå·¡å¤©é…ç½®æ–‡ä»¶ + æ ¸å¿ƒç±»æ¥å£ + ç¤ºä¾‹è„šæœ¬
**çŠ¶æ€**: âœ… **PHASE 1+2 å…¨éƒ¨å®Œæˆ**

---

## ğŸ¯ æ€»ä½“æˆå°±

### ä¿®å¤çš„æ–‡ä»¶ç»Ÿè®¡

| ç±»åˆ« | æ–‡ä»¶æ•° | çŠ¶æ€ |
|------|--------|------|
| **é…ç½®æ–‡ä»¶** | 8ä¸ª | âœ… å…¨éƒ¨é‡å†™ |
| **Pythonä»£ç ** | 2ä¸ª | âœ… å…¨éƒ¨é‡æ„ |
| **æ–‡æ¡£** | 4ä¸ª | âœ… å…¨éƒ¨åˆ›å»º |
| **æ€»è®¡** | 14ä¸ª | âœ… 100%å®Œæˆ |

---

## ğŸ“‹ æ‰€æœ‰8ä¸ªé…ç½®æ–‡ä»¶çš„é‡æ„ç»†èŠ‚

### ä¿®å¤å‰çš„å…±åŒé—®é¢˜

æ¯ä¸ªé…ç½®æ–‡ä»¶éƒ½å­˜åœ¨ä»¥ä¸‹**ä¸¥é‡æ¶æ„é”™è¯¯**ï¼š

```yaml
# âŒ é”™è¯¯1: æ¨¡å‹ç±»å‹ä¸åº”è¯¥åœ¨é…ç½®ä¸­
model: CPL  # æˆ– LCDM

# âŒ é”™è¯¯2: è¦é¢„æµ‹çš„å‚æ•°ä¸åº”è¯¥åœ¨é…ç½®ä¸­
parameters:
  - H0
  - Omega_m
  - w0
  - wa

# âŒ é”™è¯¯3: Fiducialå®‡å®™å­¦å‚æ•°ä¸åº”è¯¥åœ¨é…ç½®ä¸­
reference:
  H0: 67.36
  Omega_m: 0.3153
  w0: -1.0
  wa: 0.0

# âŒ é”™è¯¯4: Fisheré¢„æµ‹ç»“æœï¼ˆè¾“å‡ºï¼‰ä¸åº”è¯¥åœ¨é…ç½®ä¸­
measurements:
  - z: 0.30
    sigma_da: 0.030
    sigma_h: 0.036

# âŒ é”™è¯¯5: å…ˆéªŒä¸åº”è¯¥åœ¨é…ç½®ä¸­
priors:
  H0: 5.0
```

### ä¿®å¤åçš„æ­£ç¡®ç»“æ„

**ç»Ÿä¸€çš„schema v2.0**ï¼Œæ‰€æœ‰é…ç½®æ–‡ä»¶éµå¾ªç›¸åŒç»“æ„ï¼š

```yaml
name: [Survey Name]
description: "Survey description"

# âœ… Section 1: ç¡¬ä»¶é…ç½®
instrument:
  telescope_type: [single_dish/interferometer/cylinder_array]
  ndish: [number]  # æˆ– ncylinders
  dish_diameter_m: [diameter]
  nbeam: [number]

# âœ… Section 2: è§‚æµ‹ç­–ç•¥
observing:
  survey_area_deg2: [area]
  total_time_hours: [time]
  frequency_range_MHz: [low, high]
  channel_width_MHz: [width]
  channel_width_hz: [width_in_hz]
  redshift_range: [z_min, z_max]

# âœ… Section 3: å™ªå£°å‚æ•°
noise:
  system_temperature_K: [Tsys]
  sky_temperature:
    model: power_law
    T_ref_K: 25.0
    nu_ref_MHz: 408.0
    beta: 2.75

# âœ… Section 4: HIç‰©ç†å‚æ•°ï¼ˆè§‚æµ‹é‡ï¼Œéå®‡å®™å­¦ï¼‰
hi_tracers:
  bias:
    model: polynomial
    coefficients: [a0, a1, a2]
  density:
    model: polynomial
    coefficients: [b0, b1, b2]

# âœ… Section 5: çº¢ç§»åˆ†bin
redshift_bins:
  default_delta_z: [dz]
  centers: [z1, z2, z3, ...]

# âœ… Section 6: å…ƒæ•°æ®
metadata:
  reference: "Paper reference"
  notes: "Additional notes"
  telescope_location: "Location"
  date_created: "2025-10-28"
  schema_version: "2.0"
```

---

## ğŸ“Š å„é…ç½®æ–‡ä»¶è¯¦æƒ…

### 1. ska1_mid_band2.yaml âœ…

**ä¿®å¤å‰**: 40è¡Œï¼Œæ··åˆäº†model/reference/priors
**ä¿®å¤å**: 60è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½® + å®Œæ•´æ³¨é‡Š

**ç¡¬ä»¶å‚æ•°**:
- 200ä¸ª15må£å¾„ç¢Ÿå‹å¤©çº¿
- è§‚æµ‹é¢ç§¯ï¼š5000 degÂ²
- è§‚æµ‹æ—¶é—´ï¼š10000å°æ—¶
- é¢‘ç‡èŒƒå›´ï¼š950-1420 MHz (z=0-0.5)

**ç§»é™¤å­—æ®µ**: model, reference (7ä¸ªå®‡å®™å­¦å‚æ•°), priors

---

### 2. ska1_wide_band1.yaml âœ…

**ä¿®å¤å‰**: 62è¡Œï¼Œæ··åˆäº†model/reference/priors
**ä¿®å¤å**: 82è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½® + å®Œæ•´æ³¨é‡Š

**ç¡¬ä»¶å‚æ•°**:
- 200ä¸ª15må£å¾„ç¢Ÿå‹å¤©çº¿
- è§‚æµ‹é¢ç§¯ï¼š20000 degÂ² (å¹¿åŸŸå·¡å¤©)
- è§‚æµ‹æ—¶é—´ï¼š10000å°æ—¶
- é¢‘ç‡èŒƒå›´ï¼š350-1050 MHz (z=0.35-3.0)

**ç§»é™¤å­—æ®µ**: model, reference (7ä¸ªå®‡å®™å­¦å‚æ•°), priors

---

### 3. bingo.yaml âœ…

**ä¿®å¤å‰**: 38è¡Œï¼Œä¸¥é‡æ··æ·†ï¼ˆmeasurementsåŒ…å«é¢„æµ‹ç»“æœï¼‰
**ä¿®å¤å**: 62è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½®

**ç¡¬ä»¶å‚æ•°**:
- 2ä¸ª40må£å¾„ç¢Ÿå‹å¤©çº¿ï¼ˆåŒç¢Ÿé…ç½®ï¼‰
- æ¯ä¸ªç¢Ÿ40ä¸ªé¦ˆæº
- è§‚æµ‹é¢ç§¯ï¼š~4130 degÂ² (10%å¤©åŒº)
- è§‚æµ‹æ—¶é—´ï¼š8760å°æ—¶ï¼ˆ1å¹´ï¼‰
- é¢‘ç‡èŒƒå›´ï¼š960-1260 MHz (z=0.13-0.5)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements (4ä¸ªçº¢ç§»çš„é¢„æµ‹), priors
**æ–°å¢ä½ç½®**: æ™ºåˆ©Atacamaæ²™æ¼ 

---

### 4. chime.yaml âœ…

**ä¿®å¤å‰**: 46è¡Œï¼Œæ··åˆmodel/reference/measurements
**ä¿®å¤å**: 64è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½®

**ç¡¬ä»¶å‚æ•°**:
- 5ä¸ªåœ†æŸ±åå°„é¢
- å°ºå¯¸ï¼š100m Ã— 20m
- æ€»é¦ˆæºï¼š1024ä¸ª
- è§‚æµ‹é¢ç§¯ï¼š22620 degÂ² (55%å¤©åŒº)
- è§‚æµ‹æ—¶é—´ï¼š26280å°æ—¶ï¼ˆ3å¹´ï¼‰
- é¢‘ç‡èŒƒå›´ï¼š400-800 MHz (z=0.8-2.5)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements (4ä¸ªçº¢ç§»), priors
**æ–°å¢ä½ç½®**: åŠ æ‹¿å¤§ä¸åˆ—é¢ å“¥ä¼¦æ¯”äºšçœ

---

### 5. meerkat.yaml âœ…

**ä¿®å¤å‰**: 41è¡Œï¼Œæ··åˆmodel/reference/measurements
**ä¿®å¤å**: 61è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½®

**ç¡¬ä»¶å‚æ•°**:
- 64ä¸ª13.5må£å¾„ç¢Ÿå‹å¤©çº¿
- è‡ªç›¸å…³æ¨¡å¼
- è§‚æµ‹é¢ç§¯ï¼š8250 degÂ² (20%å¤©åŒº)
- è§‚æµ‹æ—¶é—´ï¼š13140å°æ—¶ï¼ˆ1.5å¹´ï¼‰
- é¢‘ç‡èŒƒå›´ï¼š900-1420 MHz (z=0-0.58)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements (3ä¸ªçº¢ç§»), priors
**æ–°å¢ä½ç½®**: å—éåŒ—å¼€æ™®çœ

---

### 6. ska_mid.yaml âœ…

**ä¿®å¤å‰**: 51è¡Œï¼Œæ··åˆmodel/reference/measurements/priors
**ä¿®å¤å**: 63è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½®

**ç¡¬ä»¶å‚æ•°**:
- 190ä¸ª15må£å¾„ç¢Ÿå‹å¤©çº¿
- å•ç¢Ÿæ¨¡å¼
- è§‚æµ‹é¢ç§¯ï¼š30940 degÂ² (75%å¤©åŒºï¼Œ1.7 sr)
- è§‚æµ‹æ—¶é—´ï¼š17520å°æ—¶ï¼ˆ2å¹´ï¼‰
- é¢‘ç‡èŒƒå›´ï¼š350-1050 MHz (z=0.2-2.5)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements (5ä¸ªçº¢ç§»), priors (2ä¸ªå‚æ•°)
**æ–°å¢ä½ç½®**: å—é + æ¾³å¤§åˆ©äºšï¼ˆè®¡åˆ’ä¸­ï¼‰

---

### 7. tianlai.yaml âœ…

**ä¿®å¤å‰**: 41è¡Œï¼Œæ··åˆmodel/reference/measurements
**ä¿®å¤å**: 62è¡Œï¼Œçº¯ç¡¬ä»¶é…ç½®

**ç¡¬ä»¶å‚æ•°**:
- 3ä¸ªåœ†æŸ±åå°„é¢
- å°ºå¯¸ï¼š40m Ã— 15m
- æ¯ä¸ªåœ†æŸ±96ä¸ªé¦ˆæºï¼ˆä¼°è®¡ï¼‰
- è§‚æµ‹é¢ç§¯ï¼š14427 degÂ² (35%å¤©åŒº)
- è§‚æµ‹æ—¶é—´ï¼š8760å°æ—¶ï¼ˆ1å¹´ï¼‰
- é¢‘ç‡èŒƒå›´ï¼š700-800 MHz (z=0.78-1.03)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements (3ä¸ªçº¢ç§»), priors
**æ–°å¢ä½ç½®**: ä¸­å›½æ–°ç–†

---

### 8. ska1.yaml âœ…

**ä¿®å¤å‰**: 45è¡Œï¼Œ**å®Œå…¨é”™è¯¯** - åªæœ‰model/measurementsï¼Œæ²¡æœ‰ç¡¬ä»¶
**ä¿®å¤å**: 72è¡Œï¼Œå®Œæ•´ç¡¬ä»¶é…ç½®

**ç‰¹æ®Šä¹‹å¤„**:
- åŸé…ç½®æœ€ç³Ÿç³•ï¼šå®Œå…¨æ²¡æœ‰instrumentå­—æ®µï¼
- measurementså­—æ®µæœ¬åº”æ˜¯è¾“å‡ºï¼Œå´è¢«å½“ä½œè¾“å…¥
- æ··ä¹±çš„å‚æ•°åï¼šDdishï¼ˆå˜ç±³ï¼‰, T_instï¼ˆæ¯«å¼€ï¼‰

**é‡æ„åç¡¬ä»¶å‚æ•°**ï¼ˆä»æ··ä¹±æ•°æ®æ¨æ–­ï¼‰:
- 190ä¸ª15må£å¾„ç¢Ÿå‹å¤©çº¿
- è§‚æµ‹é¢ç§¯ï¼š20000 degÂ²
- è§‚æµ‹æ—¶é—´ï¼š10000å°æ—¶
- é¢‘ç‡èŒƒå›´ï¼š350-1050 MHz (Band 1)

**ç§»é™¤å­—æ®µ**: model, parameters, reference, measurements, priors
**æ–°å¢metadata**: è¯¦ç»†è¯´æ˜äº†é‡æ„è¿‡ç¨‹

---

## ğŸ”§ ä»£ç é‡æ„æ€»ç»“

### IntensityMappingFisherç±» (intensity_mapping.py)

#### ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰:
```python
def __init__(self, survey, model_override=None, gamma=0.55):
    model_name = model_override or survey.model  # âŒ ä»é…ç½®è¯»å–
    params = survey.reference.copy()             # âŒ ä»é…ç½®è¯»å–
    self.cosmology = _instantiate_cosmology(model_name, params)
```

#### ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰:
```python
def __init__(
    self,
    survey: IntensityMappingSurvey,
    cosmology = None,  # âœ… é€šè¿‡å‚æ•°æ³¨å…¥
    model_override: Optional[str] = None,  # DEPRECATED
    gamma: float = 0.55,
):
    """
    New API: Pass cosmology explicitly
    Old API: Backward compatible with deprecation warning
    """
    if cosmology is not None:
        self.cosmology = cosmology  # âœ… ä½¿ç”¨å¤–éƒ¨ä¼ å…¥çš„
    elif hasattr(survey, 'model'):  # å‘åå…¼å®¹
        warnings.warn("Deprecated API...", DeprecationWarning)
        # æ—§é€»è¾‘...
    else:
        raise ValueError("Cosmology must be provided")
```

**å…³é”®æ”¹è¿›**:
- âœ… **ä¾èµ–æ³¨å…¥**: Cosmologyä»å¤–éƒ¨ä¼ å…¥ï¼Œä¸ä»surveyè¯»å–
- âœ… **å‘åå…¼å®¹**: æ—§ä»£ç ä»èƒ½è¿è¡Œï¼Œå¸¦deprecationè­¦å‘Š
- âœ… **æ¸…æ™°æ–‡æ¡£**: å®Œæ•´docstring + ä½¿ç”¨ç¤ºä¾‹
- âœ… **é”™è¯¯æç¤º**: æ˜ç¡®çš„æ–°æ—§APIå¯¹æ¯”

---

### ç¤ºä¾‹è„šæœ¬ (run_ska1_forecasts.py)

#### ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰:
```python
def main():
    for survey_name in ['ska1_mid_band2', 'ska1_wide_band1']:
        survey = load_survey(survey_name)
        calculator = IntensityMappingFisher(survey)  # âŒ æ²¡æœ‰cosmology
        # âŒ fiducialä»survey.referenceè¯»å–
        fiducial = [survey.reference.get(p, 0.0) for p in params]
```

#### ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰:
```python
# âœ… Fiducialå®šä¹‰åœ¨è„šæœ¬ä¸­
FIDUCIAL_CPL = {
    'H0': 67.36,
    'Omega_m': 0.316,
    'w0': -1.0,
    'wa': 0.0
}

def main():
    # âœ… æ˜¾å¼åˆ›å»ºcosmology
    cosmo = CPL(**FIDUCIAL_CPL)

    for survey_name in ['ska1_mid_band2', 'ska1_wide_band1']:
        survey = load_survey(survey_name)  # åªåŠ è½½ç¡¬ä»¶
        calculator = IntensityMappingFisher(survey, cosmo)  # âœ… æ³¨å…¥cosmology

# âœ… æ–°å¢ï¼šå¤šæ¨¡å‹å¯¹æ¯”æ¼”ç¤º
def run_multi_model_comparison(survey_name):
    survey = load_survey(survey_name)
    models = {
        'LCDM': LCDM(H0=67.36, Omega_m=0.316),
        'wCDM': wCDM(H0=67.36, Omega_m=0.316, w=-1.0),
        'CPL': CPL(H0=67.36, Omega_m=0.316, w0=-1.0, wa=0.0),
    }
    for name, cosmo in models.items():
        fisher = IntensityMappingFisher(survey, cosmo)
        results[name] = fisher.parameter_forecast(['H0', 'Omega_m'])
```

---

## ğŸ“ˆ æ¶æ„æ”¹è¿›å¯¹æ¯”

### ä¿®å¤å‰çš„æµç¨‹ï¼ˆé”™è¯¯ï¼‰:

```
é…ç½®æ–‡ä»¶ (ç¡¬ä»¶ + æ¨¡å‹ + å‚æ•°)
    â†“
load_survey()
    â†“
IntensityMappingSurvey (æ··åˆå…³æ³¨ç‚¹)
    â†“
IntensityMappingFisher(survey)
    â†“ ä» survey.model è¯»å–æ¨¡å‹
    â†“ ä» survey.reference è¯»å–å‚æ•°
IntensityMappingFisher.cosmology (è€¦åˆ)
    â†“
âŒ æ— æ³•çµæ´»åˆ‡æ¢æ¨¡å‹
âŒ å‚æ•°æ¥æºä¸æ¸…æ™°
âŒ è¿åå•ä¸€èŒè´£åŸåˆ™
```

### ä¿®å¤åçš„æµç¨‹ï¼ˆæ­£ç¡®ï¼‰:

```
é…ç½®æ–‡ä»¶ (åªæœ‰ç¡¬ä»¶)
    â†“
load_survey()
    â†“
IntensityMappingSurvey (çº¯ç¡¬ä»¶)

+

Pythonè„šæœ¬
    â†“
æ˜¾å¼åˆ›å»º Cosmology
    â†“ LCDM / wCDM / CPL / ...

â†“ â†“
IntensityMappingFisher(survey, cosmology)
    â†“ ä¾èµ–æ³¨å…¥
IntensityMappingFisher.cosmology
    â†“
âœ… åŒä¸€å·¡å¤©ï¼Œå¤šä¸ªæ¨¡å‹
âœ… å‚æ•°æ¥æºæ¸…æ™°
âœ… å®Œå…¨è§£è€¦
âœ… æ˜“äºæµ‹è¯•å’Œæ‰©å±•
```

---

## ğŸ‰ æ”¶ç›Šæ€»ç»“

### 1. æ¶æ„è´¨é‡
- âœ… **å…³æ³¨ç‚¹åˆ†ç¦»**: ç¡¬ä»¶ â†” å®‡å®™å­¦å®Œå…¨ç‹¬ç«‹
- âœ… **å•ä¸€èŒè´£**: é…ç½®æ–‡ä»¶åªæè¿°ç¡¬ä»¶
- âœ… **ä¾èµ–æ³¨å…¥**: Fisherç±»é€šè¿‡å‚æ•°æ¥æ”¶cosmology
- âœ… **å¼€é—­åŸåˆ™**: æ–°å¢æ¨¡å‹æ— éœ€ä¿®æ”¹é…ç½®

### 2. ä»£ç çµæ´»æ€§
- âœ… **å¤šæ¨¡å‹å¯¹æ¯”**: åŒä¸€å·¡å¤©å¯æµ‹è¯•LCDM/wCDM/CPL
- âœ… **å‚æ•°é€æ˜**: Fiducialå€¼åœ¨ä»£ç ä¸­æ˜ç¡®å®šä¹‰
- âœ… **æ˜“äºæ‰©å±•**: æ–°å¢å·¡å¤©åªéœ€æ·»åŠ ç¡¬ä»¶é…ç½®

### 3. å¯ç»´æŠ¤æ€§
- âœ… **ç»Ÿä¸€Schema**: æ‰€æœ‰é…ç½®æ–‡ä»¶ç»“æ„ä¸€è‡´ï¼ˆv2.0ï¼‰
- âœ… **å®Œæ•´æ–‡æ¡£**: æ¯ä¸ªé…ç½®éƒ½æœ‰è¯¦ç»†æ³¨é‡Š
- âœ… **å…ƒæ•°æ®è¿½æº¯**: referenceå­—æ®µæŒ‡æ˜æ•°æ®æ¥æº
- âœ… **å‘åå…¼å®¹**: æ—§ä»£ç ä»èƒ½è¿è¡Œï¼ˆå¸¦è­¦å‘Šï¼‰

### 4. éµå¾ªæ ‡å‡†
- âœ… **Bull 2016æ–¹æ³•**: é…ç½®æ–‡ä»¶=Table 1ï¼ˆç¡¬ä»¶ï¼‰ï¼Œç»“æœ=Table 2-4ï¼ˆè¾“å‡ºï¼‰
- âœ… **SOLIDåŸåˆ™**: å•ä¸€èŒè´£ã€ä¾èµ–å€’ç½®
- âœ… **æœ€ä½³å®è·µ**: é…ç½®ä¸é€»è¾‘åˆ†ç¦»

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### ä»£ç è¡Œæ•°å˜åŒ–

| æ–‡ä»¶ | ä¿®å¤å‰ | ä¿®å¤å | å˜åŒ– | è¯´æ˜ |
|------|--------|--------|------|------|
| ska1_mid_band2.yaml | 40 | 60 | +20 | æ–°å¢ç»“æ„åŒ–æ³¨é‡Š |
| ska1_wide_band1.yaml | 62 | 82 | +20 | æ–°å¢ç»“æ„åŒ–æ³¨é‡Š |
| bingo.yaml | 38 | 62 | +24 | å®Œå…¨é‡æ„ |
| chime.yaml | 46 | 64 | +18 | å®Œå…¨é‡æ„ |
| meerkat.yaml | 41 | 61 | +20 | å®Œå…¨é‡æ„ |
| ska_mid.yaml | 51 | 63 | +12 | å®Œå…¨é‡æ„ |
| tianlai.yaml | 41 | 62 | +21 | å®Œå…¨é‡æ„ |
| ska1.yaml | 45 | 72 | +27 | ä»å¤´é‡å»º |
| **é…ç½®æ–‡ä»¶æ€»è®¡** | **364** | **526** | **+162 (+44%)** | æ³¨é‡Šå’Œç»“æ„ |
| intensity_mapping.py | 435 | 485 | +50 | æ–°API + å…¼å®¹ |
| run_ska1_forecasts.py | 52 | 172 | +120 | å¤šæ¨¡å‹å¯¹æ¯” |
| **Pythonä»£ç æ€»è®¡** | **487** | **657** | **+170 (+35%)** | åŠŸèƒ½å¢å¼º |
| **æ€»è®¡** | **851** | **1183** | **+332 (+39%)** | è´¨é‡æå‡ |

### ç§»é™¤çš„é”™è¯¯å­—æ®µç»Ÿè®¡

| å­—æ®µç±»å‹ | å‡ºç°æ¬¡æ•° | è¯´æ˜ |
|---------|---------|------|
| `model` | 8æ¬¡ | æ‰€æœ‰é…ç½®éƒ½æœ‰ï¼ˆCPL/LCDMï¼‰ |
| `parameters` | 6æ¬¡ | è¦é¢„æµ‹çš„å‚æ•°åˆ—è¡¨ |
| `reference` | 8æ¬¡ | Fiducialå®‡å®™å­¦å‚æ•°ï¼ˆæ¯ä¸ª7-10ä¸ªå‚æ•°ï¼‰ |
| `measurements` | 6æ¬¡ | Fisheré¢„æµ‹ç»“æœï¼ˆè¾“å‡ºå½“è¾“å…¥ï¼‰ |
| `priors` | 6æ¬¡ | å®‡å®™å­¦å…ˆéªŒ |
| **æ€»è®¡** | **34ä¸ªé”™è¯¯å­—æ®µ** | å…¨éƒ¨ç§»é™¤ï¼ |

### æ–°å¢çš„æ­£ç¡®å­—æ®µç»Ÿè®¡

| æ–°å¢å­—æ®µ | å‡ºç°æ¬¡æ•° | è¯´æ˜ |
|---------|---------|------|
| `observing` section | 8æ¬¡ | è§‚æµ‹ç­–ç•¥ |
| `metadata` section | 8æ¬¡ | å…ƒæ•°æ®è¿½æº¯ |
| `telescope_location` | 8æ¬¡ | æœ›è¿œé•œä½ç½® |
| `schema_version` | 8æ¬¡ | Schemaç‰ˆæœ¬æ§åˆ¶ |
| `frequency_range_MHz` | 8æ¬¡ | é¢‘ç‡èŒƒå›´ |
| `redshift_range` | 8æ¬¡ | çº¢ç§»èŒƒå›´ |

---

## âš ï¸ å‘åå…¼å®¹æ€§

### æ—§ä»£ç çš„è¡Œä¸º

```python
# æ—§ä»£ç ï¼ˆæœ‰model/referenceçš„é…ç½®ï¼‰
survey = load_survey('old_config')
fisher = IntensityMappingFisher(survey)  # è§¦å‘DeprecationWarning

# è¾“å‡ºè­¦å‘Šï¼š
# DeprecationWarning: Passing cosmology via survey.model/survey.reference
# is DEPRECATED. Please pass cosmology explicitly:
#   fisher = IntensityMappingFisher(survey, cosmology)
# This will be removed in v2.0.
```

### æ–°ä»£ç çš„æ­£ç¡®ç”¨æ³•

```python
# æ–°ä»£ç ï¼ˆçº¯ç¡¬ä»¶é…ç½®ï¼‰
survey = load_survey('ska1_mid_band2')
cosmo = CPL(H0=67.36, Omega_m=0.316, w0=-1.0, wa=0.0)
fisher = IntensityMappingFisher(survey, cosmo)  # âœ… æ­£ç¡®ï¼Œæ— è­¦å‘Š
```

### Deprecationæ—¶é—´è¡¨

- **v1.x (å½“å‰)**: æ–°æ—§APIå…±å­˜ï¼Œæ—§APIè§¦å‘è­¦å‘Š
- **v2.0 (æœªæ¥)**: ç§»é™¤æ—§APIï¼Œåªä¿ç•™æ–°API

---

## ğŸ” éªŒè¯æ¸…å•

### Phase 1+2å®Œæˆæ ‡å‡†

- [x] âœ… æ‰€æœ‰8ä¸ªé…ç½®æ–‡ä»¶åªåŒ…å«ç¡¬ä»¶ä¿¡æ¯
- [x] âœ… ç§»é™¤äº†34ä¸ªé”™è¯¯å­—æ®µ
- [x] âœ… æ–°å¢äº†ç»Ÿä¸€çš„metadata section
- [x] âœ… IntensityMappingFisheræ¥å—cosmologyå‚æ•°
- [x] âœ… ç¤ºä¾‹è„šæœ¬ä½¿ç”¨æ–°API
- [x] âœ… å‘åå…¼å®¹æ€§ä¿è¯ï¼ˆdeprecationè­¦å‘Šï¼‰
- [x] âœ… å®Œæ•´æ–‡æ¡£å’Œæ³¨é‡Š
- [x] âœ… å¤šæ¨¡å‹å¯¹æ¯”æ¼”ç¤º
- [x] âœ… Schemaç‰ˆæœ¬æ§åˆ¶ï¼ˆv2.0ï¼‰
- [ ] â³ å›å½’æµ‹è¯•ï¼ˆPhase 3ï¼‰
- [ ] â³ Bull 2016å¯¹æ¯”éªŒè¯ï¼ˆPhase 3ï¼‰

---

## ğŸ“ ä¸‹ä¸€æ­¥ (Phase 3)

### Phase 3ç›®æ ‡ï¼ˆé¢„è®¡1å‘¨ï¼‰

#### 1. å›å½’æµ‹è¯• (P0)
- [ ] åˆ›å»ºç¡®å®šæ€§fixtures
- [ ] éªŒè¯Fisherè®¡ç®—ç»“æœä¸å˜
- [ ] æ·»åŠ schemaéªŒè¯æµ‹è¯•

#### 2. Bull 2016éªŒè¯ (P1)
- [ ] å¯¹æ¯”FisherçŸ©é˜µä¸è®ºæ–‡Table 2-4
- [ ] éªŒè¯å‚æ•°çº¦æŸç²¾åº¦
- [ ] åˆ›å»ºå¯¹æ¯”å›¾è¡¨

#### 3. å¤šæ¨¡å‹åˆ†æ (P1)
- [ ] è¿è¡ŒLCDM vs wCDM vs CPLå¯¹æ¯”
- [ ] ç”Ÿæˆcontourå›¾
- [ ] åˆ†æä¸åŒæ¨¡å‹çš„çº¦æŸå·®å¼‚

#### 4. æ–‡æ¡£å®Œå–„ (P1)
- [ ] æ›´æ–°ç”¨æˆ·æ–‡æ¡£
- [ ] åˆ›å»ºè¿ç§»æŒ‡å—
- [ ] æ›´æ–°APIå‚è€ƒæ‰‹å†Œ

---

## ğŸ“ ç»éªŒæ€»ç»“

### æˆåŠŸç»éªŒ

1. **Codexæˆ˜ç•¥æŒ‡å¯¼éå¸¸å‡†ç¡®**
   - æ¶æ„é—®é¢˜è¯Šæ–­åˆ°ä½
   - å®æ–½è·¯çº¿å›¾æ¸…æ™°
   - é£é™©è¯„ä¼°å…¨é¢

2. **åˆ†é˜¶æ®µå®æ–½æ•ˆæœå¥½**
   - Phase 1ï¼š2ä¸ªé…ç½® + ç±»æ¥å£
   - Phase 2ï¼šå‰©ä½™6ä¸ªé…ç½®
   - é€æ­¥æ¨è¿›ï¼Œé£é™©å¯æ§

3. **å‘åå…¼å®¹é¿å…ç ´å**
   - Deprecationè­¦å‘Šè€Œéç›´æ¥åˆ é™¤
   - æ—§ä»£ç ä»èƒ½è¿è¡Œ
   - ç»™ç”¨æˆ·è¶³å¤Ÿè¿ç§»æ—¶é—´

4. **æ–‡æ¡£ä¼˜å…ˆä¿è¯è´¨é‡**
   - æ¯ä¸ªæ”¹åŠ¨éƒ½æœ‰æ¸…æ™°æ³¨é‡Š
   - å…ƒæ•°æ®è¿½æº¯æ•°æ®æ¥æº
   - ä¾¿äºæœªæ¥ç»´æŠ¤

### å…³é”®å†³ç­–

1. **ç«‹å³ä¿®æ”¹ç±»æ¥å£** (æ­£ç¡®)
   - ä¸ç­‰Phase 2ï¼Œåœ¨Phase 1å°±é‡æ„
   - é¿å…åç»­å¤§è§„æ¨¡æ”¹åŠ¨

2. **ç»Ÿä¸€Schema v2.0** (æ­£ç¡®)
   - æ‰€æœ‰é…ç½®æ–‡ä»¶ç»“æ„ä¸€è‡´
   - æ˜“äºç†è§£å’Œç»´æŠ¤

3. **ä¿ç•™omega_total** (æ­£ç¡®)
   - ska1.yamlä¸­ä¿ç•™äº†åŸå§‹æ•°æ®
   - ä¾¿äºéªŒè¯å’Œè¿½æº¯

---

## ğŸ† æœ€ç»ˆæˆæœ

### ä¿®å¤çš„P0é—®é¢˜å¯¹ç…§è¡¨

| Codexè¯†åˆ«çš„é—®é¢˜ | æ–‡ä»¶æ•° | ä¿®å¤çŠ¶æ€ |
|----------------|--------|---------|
| **é—®é¢˜1**: é…ç½®æ··æ·†ç¡¬ä»¶ä¸æ¨¡å‹ | 8ä¸ªé…ç½® | âœ… å…¨éƒ¨ä¿®å¤ |
| **é—®é¢˜2**: é…ç½®åŒ…å«åˆ†æç»“æœ | 6ä¸ªé…ç½® | âœ… å…¨éƒ¨ç§»é™¤ |
| **é—®é¢˜3**: Surveyå¼ºåˆ¶æºå¸¦cosmology | 1ä¸ªç±» | âœ… å·²ä¿®å¤ |
| **é—®é¢˜4**: Fisherä»surveyè¯»å–å‚æ•° | 1ä¸ªç±» | âœ… å·²ä¿®å¤ |
| **é—®é¢˜5**: ç¤ºä¾‹è„šæœ¬ä½¿ç”¨survey.reference | 1ä¸ªè„šæœ¬ | âœ… å·²ä¿®å¤ |

### æ¶æ„æ”¹è¿›æˆæœ

1. âœ… **å®Œå…¨è§£è€¦**: ç¡¬ä»¶é…ç½® â†” å®‡å®™å­¦æ¨¡å‹
2. âœ… **çµæ´»å¤šæ¨¡å‹**: åŒä¸€å·¡å¤©æµ‹è¯•å¤šä¸ªæ¨¡å‹
3. âœ… **å‚æ•°é€æ˜**: Fiducialå€¼åœ¨ä»£ç ä¸­æ˜ç¡®
4. âœ… **æ˜“äºæ‰©å±•**: æ–°å¢å·¡å¤©/æ¨¡å‹éƒ½å¾ˆç®€å•
5. âœ… **éµå¾ªæ ‡å‡†**: Bull 2016æ–¹æ³• + SOLIDåŸåˆ™

---

**Phase 1+2çŠ¶æ€**: âœ… **åœ†æ»¡å®Œæˆï¼**

**ä¸‹ä¸€æ­¥**: Phase 3 - å›å½’æµ‹è¯•å’ŒBull 2016éªŒè¯

**é¢„è®¡æ—¶é—´**: Phase 3çº¦éœ€1å‘¨

---

**æŠ¥å‘Šç”Ÿæˆ**: 2025-10-28
**å®¡æŸ¥è€…**: Codex CLI + Claude Code
**æ‰¹å‡†è€…**: ç”¨æˆ·
